
      
  <html>
    <head>
      <meta charset="utf-8"></meta>
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
      <title>diffHTML: An easy-to-use HTML Virtual DOM built for the web!</title>
      <link rel="stylesheet" href="./index.css"></link>
    </head>

    <body class="parser">
      <layer id="navigation">

        <p class="social">
          <a class="github" href="https://github.com/tbranyen/diffhtml">
            <i class="fa fa-github"></i>
          </a>
          <a class="stackoverflow" href="https://stackoverflow.com/search?q=diffhtml+javascript">
            <i class="fa fa-stack-overflow"></i>
          </a>
          <a class="twitter" href="https://twitter.com/diffhtml">
            <i class="fa fa-twitter"></i>
          </a>
          <a class="reddit" href="https://reddit.com/r/diffhtml">
            <i class="fa fa-reddit"></i>
          </a>
        </p>

        
  <ul>
    
      
        <a href="index.html"><li class="header"><h4>Home</h4></li></a>
      

      
    
      

      
        <a href="index.html#core-features" target><li>Core features</li></a>
      
    
      

      
        <a href="index.html#getting-started" target><li>Getting started</li></a>
      
    
      

      
        <a href="index.html#examples" target><li>Examples</li></a>
      
    
      
        <a href="api.html"><li class="header"><h4>Core API</h4></li></a>
      

      
    
      

      
        <a href="api.html#inner-html" target><li>innerHTML</li></a>
      
    
      

      
        <a href="api.html#outer-html" target><li>outerHTML</li></a>
      
    
      

      
        <a href="api.html#html" target><li>html</li></a>
      
    
      

      
        <a href="api.html#use" target><li>use</li></a>
      
    
      

      
        <a href="api.html#add-transition-state" target><li>addTransitionState</li></a>
      
    
      

      
        <a href="api.html#remove-transition-state" target><li>removeTransitionState</li></a>
      
    
      

      
        <a href="api.html#create-tree" target><li>createTree</li></a>
      
    
      

      
        <a href="api.html#release" target><li>release</li></a>
      
    
      

      
        <a href="api.html#internals" target><li>Internals</li></a>
      
    
      

      
        <a href="api.html#version" target><li>VERSION</li></a>
      
    
      
        <a href="parser.html"><li class="header"><h4>Parser</h4></li></a>
      

      
    
      

      
        <a href="parser.html#options" target><li>Options</li></a>
      
    
      

      
        <a href="parser.html#dynamic-values" target><li>Dynamic values</li></a>
      
    
      
        <a href="transitions.html"><li class="header"><h4>Transitions</h4></li></a>
      

      
    
      

      
        <a href="transitions.html#states" target><li>States</li></a>
      
    
      
        <a href="middleware.html"><li class="header"><h4>Middleware</h4></li></a>
      

      
    
      

      
        <a href="middleware.html#writing-middleware" target><li>Writing middleware</li></a>
      
    
      

      
        <a href="middleware.html#inline-transitions" target><li>Inline Transitions</li></a>
      
    
      

      
        <a href="middleware.html#logger" target><li>Logger</li></a>
      
    
      

      
        <a href="middleware.html#service-worker" target><li>Service Worker</li></a>
      
    
      

      
        <a href="middleware.html#synthetic-events" target><li>Synthetic Events</li></a>
      
    
      

      
        <a href="middleware.html#verify-state" target><li>Verify State</li></a>
      
    
      

      
        <a href="middleware.html#html-linter" target><li>HTML Linter</li></a>
      
    
      
        <a href="components.html"><li class="header"><h4>Components</h4></li></a>
      

      
    
      

      
        <a href="components.html#overview" target><li>Overview</li></a>
      
    
      

      
        <a href="components.html#lifecycle-hooks" target><li>Lifecycle hooks</li></a>
      
    
      

      
        <a href="components.html#component" target><li>Component</li></a>
      
    
      

      
        <a href="components.html#web-component" target><li>Web Component</li></a>
      
    
      

      
        <a href="components.html#jsx" target><li>JSX</li></a>
      
    
      

      
        <a href="components.html#react" target><li>React Compatibility</li></a>
      
    
      
        <a href="tools.html"><li class="header"><h4>Additional Packages</h4></li></a>
      

      
    
      

      
        <a href="tools.html#babel-transform" target><li>Babel Transform</li></a>
      
    
      

      
        <a href="tools.html#render-to-string" target><li>Render to String</li></a>
      
    
      

      
        <a href="tools.html#static-sync" target><li>Live Reload Server</li></a>
      
    
      
        <a href="devtools.html"><li class="header"><h4>DevTools</h4></li></a>
      

      
    
      

      
        <a href="devtools.html#install" target><li>Install</li></a>
      
    
      

      
        <a href="devtools.html#panels" target><li>Panels</li></a>
      
    
  </ul>

      </layer>

      <layer id="main">
        <div class="open-menu">â‰¡</div>
        <header>
          <h1>
            <a href="/"><img width="120" src="./images/diffhtml-logo.png"></img></a>
            <div>
              <p class="name">diffHTML</p><sub>v1.0.0-beta.16</sub>
              <p>An easy-to-use Virtual DOM built for the web!</p>
            </div>
          </h1>
        </header>

        <hr></hr>

        <section id="content"><h1 id="parser">Parser</h1>
<p>A core feature of diffHTML is the HTML/XML/SVG parser. This is used whenever
you pass a string of markup or 
    <a href="/api.html#html" title="null">use the html tagged template</a>
  
to 
    <a href="/api.html#inner-html" title="null">innerHTML</a>
  /
    <a href="/api.html#ouuter-html" title="null">outerHTML</a>
  . This
works very similar to JSX where you are able to optimize away the parser. While
this code is optimized specifically for the VDOM and is very fast, you may want
to optimize out the markup using the Babel plugin.</p>
<p>The parser can read full HTML documents including doctype, html/head/body/title
etc tags, unwrapped fragments, and more!</p>
<p><strong>Using with innerHTML:</strong></p>
<pre><code class="language-js">import { innerHTML } from &#39;diffhtml&#39;;

// Using innerHTML will parse the HTML markup from a string literal.
innerHTML(document.body, &#39;&lt;div&gt;Hello world&lt;/div&gt;&#39;);</code></pre>
<p>This produces a single top level element <code>&lt;div/&gt;</code> with a nested <code>#text</code> node.</p>
<p>If you were to structure your code like this:</p>
<pre><code class="language-js">import { innerHTML } from &#39;diffhtml&#39;;

// Using innerHTML will parse the HTML markup from a string literal.
innerHTML(document.body, &#39;&lt;div&gt;Hello world&lt;/div&gt;&#39;);</code></pre>
<p>This would become:</p>
<pre><code class="language-js">import { createTree } from &#39;diffhtml&#39;;

innerHTML(document.body, createTree(&#39;div&#39;, null, [
  createTree(&#39;#text&#39;, &#39;Hello world&#39;)
]));</code></pre>
<p>You&#39;ll notice the top-level element returned is &#39;div&#39;. From there you may
think:</p>
<pre><code class="language-js">import { innerHTML } from &#39;diffhtml&#39;;

// Using innerHTML will parse the HTML markup from a string literal.
innerHTML(document.body, `
  &lt;div&gt;Hello world&lt;/div&gt;
`);</code></pre>
<p>Would produce similar behavior, but it does not. The returned value mirrors
what is embedded precisely, becoming:</p>
<pre><code class="language-js">import { createTree } from &#39;diffhtml&#39;;

innerHTML(document.body, createTree(&#39;#document-fragment&#39;, [
  createTree(&#39;#text&#39;, &#39;\n&#39;),
  createTree(&#39;div&#39;, null, [createTree(&#39;#text&#39;, &#39;Hello world&#39;)]),
  createTree(&#39;#text&#39;, &#39;\n&#39;),
]));</code></pre>
<p>This can be useful knowledge for optimizing, but for more applications it
should be fine to keep them in for developer convenience.</p>
<p><strong>Using with outerHTML:</strong></p>
<pre><code class="language-js">import { outerHTML } from &#39;diffhtml&#39;;

// Using outerHTML will parse the HTML markup and apply around the element.
outerHTML(document.body, `
  &lt;body&gt;Hello world&lt;/body&gt;
`);</code></pre>
<p><strong>Using with html:</strong></p>
<pre><code class="language-js">import { html } from &#39;diffhtml&#39;;

// The tagged template will parse HTML in the same way, and also handle
// dynamic values directly.
console.log(html`
  &lt;div&gt;Hello world&lt;/div&gt;
`);</code></pre>
<p><strong>Using directly from Internals:</strong></p>
<pre><code class="language-js">import { Internals } from &#39;diffhtml&#39;;

// This is the raw parse function which allows you to map dynamic values
// to either a TAG, ATTRIBUTE, or CHILD. You can find more information
// about this in the dynamic values section below.
console.log(Internals.parse(`
  &lt;div&gt;Hello world&lt;/div&gt;
`));</code></pre>
<p><a name="options"></a></p>
<hr></hr>
<h2 id="a-hrefoptionsoptionsa"><a href="#options">Options</a></h2>
<p>The parser is somewhat configurable, allowing you to opt into a strict-mode for
erroring if invalid markup is passed. This could be useful to pair with the

    <a href="/middleware.html#html-linter" title="null">HTML Linter Middleware</a>
  .</p>
<ul>
<li>
    <a href="#strict-mode" title="null"><code>strict</code></a>
   - Toggle strict mode parsing</li>
<li>
    <a href="#block-elements" title="null"><code>rawElements</code></a>
   - Modify the list of elements that have raw values</li>
<li>
    <a href="#self-closing" title="null"><code>selfClosingElements</code></a>
   - Modify the list of elements that can self close</li>
</ul>
<p><a name="strict-mode"></a></p>
<hr></hr>
<h3 id="a-hrefstrict-modestrict-modea"><a href="#strict-mode">Strict mode</a></h3>
<p>By default the parser operates in loose-mode which is forgiving of missing
closing tags, poor markup, and other common issues. When opting into strict
mode you will receive errors if you don&#39;t properly self close tags, have
mismatched tag names, etc.</p>
<pre><code class="language-js">import { innerHTML } from &#39;diffhtml&#39;;

const options = {
  parser: {
    strict: true,
  }
};

// Will be fine since the elements match
innerHTML(document.body, `
  &lt;h1&gt;Hello world&lt;/h1&gt;
`, options);

// Will throw since the elements do not match
innerHTML(document.body, `
  &lt;h1&gt;Hello world&lt;/h2&gt;
`, options);</code></pre>
<p>Unlike the other two options below, this feature can be configured using the
tagged template 
    <a href="/api.html#html" title="null"><code>html</code></a>
   directly.</p>
<pre><code class="language-js">import { html } from &#39;diffhtml&#39;;

// Will throw an error due to the tag mismatch
html.strict`
  &lt;p&gt;&lt;/div&gt;
`;</code></pre>
<p><a name="block-elements"></a></p>
<hr></hr>
<h3 id="a-hrefraw-elementsraw-elementsa"><a href="#raw-elements">Raw elements</a></h3>
<p>A list of elements that have their contents treated as raw text, rather than
parsed as HTML. You can provide your own list of element names to allow this
feature.</p>
<p>Examples of these kinds of elements are: <code>&lt;pre&gt;</code>, <code>&lt;code&gt;</code>, <code>&lt;script&gt;</code>, <code>&lt;style&gt;</code></p>
<p><a name="self-closing-elements"></a></p>
<hr></hr>
<h3 id="a-hrefself-closing-elementsself-closing-elementsa"><a href="#self-closing-elements">Self closing elements</a></h3>
<p>A list of elements that are allowed to self close. You can provide your own list of
element names to allow this feature.</p>
<p>Examples of these kinds of elements are: <code>&lt;meta/&gt;</code>, <code>&lt;hr/&gt;</code>, <code>&lt;img/&gt;</code></p>
<p><a name="dynamic-values"></a></p>
<hr></hr>
<h2 id="a-hrefdynamic-valuesdynamic-valuesa"><a href="#dynamic-values">Dynamic values</a></h2>
<p>The parser allows you to use dynamic values for many different parts of the
HTML syntax.</p>
<p>You can put dynamic values in either: <em>tag</em>, <em>attribute</em>, or <em>children</em> locations.
This makes it incredibly easy to compose dynamic template-driven UIs from your
JavaScript view layer.</p>
<pre><code>&lt;TAG ATTRIBUTE&gt;CHILDREN&lt;/TAG&gt;</code></pre><p>Internally diffHTML has the notion of a Supplemental object. This object contains
three keys: <code>tags</code>, <code>attributes</code>, <code>children</code>.</p>
<p>In order to indicate that a given position should be swapped with a dynamic value
simply use the syntax: <strong>&#95;&#95;DIFFHTML&#95;&#95;TOKEN&#95;&#95;</strong>. Where the <strong>TOKEN</strong> value is an arbitrary
string value that will correlate to a value provided to the parser. Every token
must be completely unique. You cannot guarentee that the parser won&#39;t try to
determine automatically what type the token belongs to. If a value is not found for the token, it
will be left in your source.</p>
<p><strong>An example setting each type of injection:</strong></p>
<pre><code class="language-js">import { Internals, innerHTML } from &#39;diffhtml&#39;;

const vTree = Internals.parse(`
  &lt;__DIFFHTML__TOKEN_0__ style=__DIFFHTML__TOKEN_1__&gt;__DIFFHTML__TOKEN_2__&lt;/div&gt;
`, {
  tags: {
    &#39;TOKEN_0&#39;: &#39;div&#39;,
  },
  attributes: {
    &#39;TOKEN_1&#39;: { fontWeight: &#39;bold&#39; },
  },
  children: {
    &#39;TOKEN_2&#39;: &#39;Custom style object&#39;,
  },
});

innerHTML(document.body, vTree);</code></pre>
</section>

        <a href="https://github.com/tbranyen/diffhtml/edit/master/packages/diffhtml-website/pages/parser.md" id="edit-on-github">
          Edit on GitHub &nbsp; <span class="fa fa-github"></span>
        </a>

        <footer>
          <a href="https://twitter.com/tbranyen" style="text-decoration: none;">
            <span>Created by @tbranyen</span>
          </a>
          <span style="margin: 0 15px;"> | </span>
          <a href="https://twitter.com/s0phinie" style="text-decoration: none;">
            <span>Logo by @s0phinie</span>
          </a>
          <span style="margin-left: 15px;"> | </span>
          <a style="margin-left: 15px; text-decoration: none;" href="https://raw.githubusercontent.com/tbranyen/diffhtml/master/LICENSE"> MIT License</a>
        </footer>
      </layer>

      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
      <script>
        try {
          hljs.initHighlightingOnLoad();
        } catch (ex) {}

        // Every time a refresh happens, reload the highlight code block.
        if (typeof staticSyncHandlers !== 'undefined') {
          setTimeout(() => staticSyncHandlers.add(() => {
            setTimeout(() => [...document.querySelectorAll('pre code')].forEach(block => {
              hljs.highlightBlock(block);
            }));
          }));
        }

        document.querySelector('.open-menu').onclick = ev => {
          ev.stopImmediatePropagation();

          const body = document.querySelector('body');
          const content = document.querySelector('section#content');

          if (body.classList.contains('open')) {
            return body.onclick();
          }

          body.classList.add('open');

          body.onclick = () => {
            body.classList.remove('open');
            body.onclick = null;
          };
        };
      </script>
    </body>
  </html>

    